<!DOCTYPE html>
<html lang="en" id="html-root">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEOä¼˜åŒ– -->
    <meta name="description" content="Math Rain - An engaging mathematical expression game">
    <meta name="keywords" content="math game, educational, arithmetic, puzzle">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Orangely">
    <link rel="canonical" id="canonical-link" href="">

    <!-- ç¤¾äº¤åˆ†äº« -->
    <meta property="og:title" content="Math Rain - Mathematical Expression Game">
    <meta property="og:description" content="Test your math skills with falling expressions!">
    <meta property="og:site_name" content="Mini Games Collection">
    <meta property="og:type" content="website">
    <meta property="og:image" content="assets/seo/og-math-rain.svg">
    <meta property="og:url" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Math Rain - Mathematical Expression Game">
    <meta name="twitter:description" content="Beat the timer as equations fall from the sky.">
    <meta name="twitter:image" content="assets/seo/og-math-rain.svg">
    <title id="page-title">Math Rain</title>
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='16' fill='%23667eea'/%3E%3Ctext x='50%25' y='54%25' text-anchor='middle' font-size='28' fill='white' font-family='Segoe UI,Arial' dy='.3em'%3E%F0%9F%A7%AE%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="css/math-rain/math-rain.css">
    <style>
        .language-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .lang-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .lang-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-1px);
        }
        .lang-btn.active {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .setting-item .language-selector {
            margin-bottom: 0;
        }
        
        /* Shop styles */
        .current-coins {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
            color: #ffd166;
            font-weight: bold;
        }
        
        .shop-items {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 30px;
        }
        
        .shop-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid #667eea;
            border-radius: 12px;
            transition: all 0.2s;
        }
        
        .shop-item:hover {
            background: rgba(102, 126, 234, 0.15);
            transform: translateY(-2px);
        }
        
        .item-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .item-icon {
            font-size: 28px;
        }
        
        .item-details h3 {
            margin: 0 0 4px 0;
            font-size: 16px;
            color: #f7fafc;
        }
        
        .item-details p {
            margin: 0;
            font-size: 13px;
            color: #a0aec0;
        }
        
        .item-price {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 16px;
            font-weight: bold;
            color: #ffd166;
        }
        
        .buy-btn {
            padding: 8px 16px;
            background: #48bb78;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .buy-btn:hover {
            background: #38a169;
            transform: scale(1.05);
        }
        
        .buy-btn:disabled {
            background: #4a5568;
            cursor: not-allowed;
            transform: none;
        }
        
        .buy-btn:disabled:hover {
            background: #4a5568;
        }
    </style>
</head>

<body>
    <!-- æ¸¸æˆå®¹å™¨ -->
    <div id="game-container">
        <!-- æ¸¸æˆå¤´éƒ¨ä¿¡æ¯ -->
        <div id="game-header">
            <div class="score-display">
                <span id="score-label">åˆ†æ•°</span>
                <span id="score-value">0</span>
            </div>
            <div class="combo-display">
                <span id="combo-label">è¿å‡»</span>
                <span id="combo-value">0</span>
            </div>
            <div class="level-display">
                <span id="level-label">ç­‰çº§</span>
                <span id="level-value">1</span>
            </div>
            <div class="time-display">
                <span id="time-label">æ—¶é—´</span>
                <span id="time-value">0</span>
            </div>
            <div class="lives-display">
                <span id="lives-label">ç”Ÿå‘½</span>
                <span id="lives-value">10</span>
            </div>
            <!-- ä¼šè¯ç³»ç»ŸUI -->
            <div class="session-display" id="session-display">
                <span id="session-time-label">å‰©ä½™æ—¶é—´</span>
                <span id="session-time">3:00</span>
            </div>
            <div class="session-target-display" id="session-target-display">
                <span id="session-target-label">ç›®æ ‡åˆ†æ•°</span>
                <span id="session-target">100</span>
            </div>
            <!-- å‡çº§æç¤º -->
            <div class="level-up-indicator" id="level-up-indicator" style="display: none;">
                <span>ğŸ¯ å¯å‡çº§!</span>
            </div>
        </div>

        <!-- æ¸¸æˆä¸»åŒºåŸŸ -->
        <div id="game-area">
            <!-- ä¸»æ¸¸æˆç”»å¸ƒ - ç”¨äºCanvasç®—å¼å’Œç‰¹æ•ˆåŠ¨ç”» -->
            <canvas id="game-canvas"></canvas>
        </div>

        <!-- ç›®æ ‡æ•°å­—æ˜¾ç¤ºåŒºåŸŸ -->
        <div id="target-area">
            <div id="target-label">ç›®æ ‡æ•°å­—</div>
            <div id="target-number">5</div>
            <div id="target-hint">ç‚¹å‡»ç»“æœç­‰äºæ­¤æ•°å­—çš„ç®—å¼</div>
        </div>

        <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® -->
        <div id="game-controls">
            <button id="pause-btn" class="control-btn">â¸ï¸ æš‚åœ</button>
            <button id="settings-btn" class="control-btn">âš™ï¸ è®¾ç½®</button>
            <button id="shop-btn" class="control-btn">ğŸ›’ å•†åº—</button>
            <button id="theme-btn" class="control-btn">ğŸ¨ ä¸»é¢˜</button>
        </div>

        <!-- å·¥å…·æ ï¼ˆé“å…·/æŠ€èƒ½ï¼‰ -->
        <div id="tool-bar" class="tool-bar">
            <div class="tool-item">
                <button id="freeze-btn" class="tool-btn" title="æ—¶é—´å†»ç»“ (å¿«æ·é”® F)">â„ï¸ Freeze</button>
                <span class="tool-count" id="freeze-count">x0</span>
            </div>
            <div class="tool-item">
                <button id="bomb-btn" class="tool-btn" title="æ¸…å± (å¿«æ·é”® B)">ğŸ’£ Bomb</button>
                <span class="tool-count" id="bomb-count">x0</span>
            </div>
            <div class="tool-item">
                <button id="shield-btn" class="tool-btn" title="æŠ¤ç›¾ (å¿«æ·é”® S)">ğŸ›¡ï¸ Shield</button>
                <span class="tool-count" id="shield-count">x0</span>
            </div>
            <div class="tool-item coins">
                <span class="coins-icon">ğŸª™</span>
                <span class="coins-value" id="coins-value">0</span>
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆå¼€å§‹ç•Œé¢ -->
    <div id="start-screen" class="screen">
        <div class="screen-content">
            <div class="language-selector">
                <button id="lang-zh" class="lang-btn" onclick="selectLanguage('zh')">ä¸­æ–‡</button>
                <button id="lang-en" class="lang-btn" onclick="selectLanguage('en')">English</button>
            </div>
            <h1 id="game-title">Math Rain</h1>
            <p id="game-subtitle">æ•°å­—é›¨</p>
            <div class="difficulty-selection">
                <h3 id="difficulty-title">é€‰æ‹©éš¾åº¦</h3>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn selected" data-level="1" id="difficulty-1">å…¥é—¨çº§ (1-10)</button>
                    <button class="difficulty-btn" data-level="2" id="difficulty-2">åˆçº§ (1-20)</button>
                    <button class="difficulty-btn" data-level="3" id="difficulty-3">ä¸­çº§ (10-50)</button>
                    <button class="difficulty-btn" data-level="4" id="difficulty-4">é«˜çº§ (20-100)</button>
                    <button class="difficulty-btn" data-level="5" id="difficulty-5">ä¸“å®¶çº§ (50-500)</button>
                    <button class="difficulty-btn" data-level="6" id="difficulty-6">å¤§å¸ˆçº§ (100-2000)</button>
                </div>
            </div>
            <div class="start-buttons">
                <button id="start-game-btn" class="start-btn">ğŸš€ å¼€å§‹æ¸¸æˆ</button>
                <button id="help-btn" class="help-btn">â“ æ¸¸æˆå¸®åŠ©</button>
            </div>
            <div class="game-rules">
                <h4 id="game-rules-title">æ¸¸æˆè§„åˆ™</h4>
                <ul>
                    <li id="rule-1">ç‚¹å‡»ç»“æœç­‰äºç›®æ ‡æ•°å­—çš„ç®—å¼å¾—åˆ†</li>
                    <li id="rule-2">è¿ç»­æ­£ç¡®å¯è·å¾—è¿å‡»åŠ æˆ</li>
                    <li id="rule-3">è¿ç»­é”™è¯¯ä¼šæ‰£åˆ†ï¼Œé”™è¯¯è¶Šå¤šæ‰£åˆ†è¶Šå¤š</li>
                    <li id="rule-4">ç®—å¼æ‰è½åˆ°åº•éƒ¨ä¼šæ¶ˆå¤±ï¼ŒæŠ“ç´§æ—¶é—´ï¼</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆæš‚åœç•Œé¢ -->
    <div id="pause-screen" class="screen hidden">
        <div class="screen-content">
            <h2 id="pause-title">â¸ï¸ æ¸¸æˆæš‚åœ</h2>
            <button id="resume-btn" class="menu-btn">ç»§ç»­æ¸¸æˆ</button>
            <button id="restart-btn" class="menu-btn">é‡æ–°å¼€å§‹</button>
            <button id="main-menu-btn" class="menu-btn">ä¸»èœå•</button>
        </div>
    </div>

    <!-- æ¸¸æˆç»“æŸç•Œé¢ -->
    <div id="game-over-screen" class="screen hidden">
        <div class="screen-content">
            <h2 id="game-over-title">ğŸ® æ¸¸æˆç»“æŸ</h2>
            <div class="final-stats">
                <div class="stat-item">
                    <span class="stat-label">æœ€ç»ˆå¾—åˆ†</span>
                    <span id="final-score" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">æœ€é«˜è¿å‡»</span>
                    <span id="max-combo" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å‡†ç¡®ç‡</span>
                    <span id="accuracy" class="stat-value">0%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">æ¸¸æˆæ—¶é—´</span>
                    <span id="game-time" class="stat-value">0s</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">è¯„çº§</span>
                    <span id="final-grade" class="stat-value grade">F</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">è·å¾—é‡‘å¸</span>
                    <span id="final-coins" class="stat-value coins">+0</span>
                </div>
            </div>
            <div class="game-over-buttons">
                <button id="play-again-btn" class="menu-btn">å†ç©ä¸€æ¬¡</button>
                <button id="change-difficulty-btn" class="menu-btn">æ›´æ”¹éš¾åº¦</button>
                <button id="home-btn" class="menu-btn">è¿”å›ä¸»é¡µ</button>
            </div>
        </div>
    </div>

    <!-- ä¼šè¯å®Œæˆç•Œé¢ -->
    <div id="session-complete-screen" class="screen hidden">
        <div class="screen-content">
            <h2 id="session-complete-title">ğŸ¯ ä¼šè¯å®Œæˆ</h2>
            <div class="final-stats">
                <div class="stat-item">
                    <span class="stat-label">æœ€ç»ˆåˆ†æ•°</span>
                    <span id="session-final-score" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ç›®æ ‡åˆ†æ•°</span>
                    <span id="session-target-score" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å‡†ç¡®ç‡</span>
                    <span id="session-accuracy" class="stat-value">0%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">æœ€é«˜è¿å‡»</span>
                    <span id="session-max-combo" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ä¼šè¯æ—¶é•¿</span>
                    <span id="session-duration" class="stat-value">3 åˆ†é’Ÿ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å‡çº§è¾¾æˆ</span>
                    <span id="session-level-up" class="stat-value">å¦</span>
                </div>
            </div>
            <div class="session-buttons">
                <button id="session-continue-btn" class="menu-btn primary">ç»§ç»­ä¸‹ä¸€å…³</button>
                <button id="session-retry-btn" class="menu-btn">é‡è¯•æœ¬å…³</button>
                <button id="session-menu-btn" class="menu-btn">è¿”å›èœå•</button>
            </div>
        </div>
    </div>

    <!-- è®¾ç½®ç•Œé¢ -->
    <div id="settings-screen" class="screen hidden">
        <div class="screen-content">
            <h2 id="settings-title">âš™ï¸ æ¸¸æˆè®¾ç½®</h2>
            <div class="settings-grid">
                <div class="setting-item">
                    <label for="sound-volume" id="sound-volume-label">éŸ³æ•ˆéŸ³é‡</label>
                    <input type="range" id="sound-volume" min="0" max="100" value="70">
                    <span id="sound-volume-value">70%</span>
                </div>
                <div class="setting-item">
                    <label for="music-volume" id="music-volume-label">èƒŒæ™¯éŸ³ä¹éŸ³é‡</label>
                    <input type="range" id="music-volume" min="0" max="100" value="50">
                    <span id="music-volume-value">50%</span>
                </div>
                <div class="setting-item">
                    <label for="particle-effects" id="particle-effects-label">ç²’å­æ•ˆæœ</label>
                    <input type="checkbox" id="particle-effects" checked>
                </div>
                <div class="setting-item">
                    <label id="language-setting-label">æ¸¸æˆè¯­è¨€</label>
                    <div class="language-selector">
                        <button id="settings-lang-zh" class="lang-btn" onclick="selectLanguage('zh')">ä¸­æ–‡</button>
                        <button id="settings-lang-en" class="lang-btn" onclick="selectLanguage('en')">English</button>
                    </div>
                </div>
            </div>
            <button id="settings-close-btn" class="menu-btn">å…³é—­è®¾ç½®</button>
        </div>
    </div>

    <!-- å•†åº—ç•Œé¢ -->
    <div id="shop-screen" class="screen hidden">
        <div class="screen-content">
            <h2 id="shop-title">ğŸ›’ é“å…·å•†åº—</h2>
            <div class="current-coins">
                <span class="coins-icon">ğŸª™</span>
                <span id="shop-coins-value">0</span>
                <span id="shop-coins-label">é‡‘å¸</span>
            </div>
            <div class="shop-items">
                <div class="shop-item">
                    <div class="item-info">
                        <span class="item-icon">â„ï¸</span>
                        <div class="item-details">
                            <h3 id="freeze-shop-title">æ—¶é—´å†»ç»“</h3>
                            <p id="freeze-shop-desc">æš‚æ—¶å†»ç»“æ‰€æœ‰ä¸‹è½çš„è¡¨è¾¾å¼</p>
                        </div>
                    </div>
                    <div class="item-price">
                        <span class="price-amount">10</span>
                        <span class="coins-icon">ğŸª™</span>
                    </div>
                    <button id="buy-freeze-btn" class="buy-btn">è´­ä¹°</button>
                </div>
                <div class="shop-item">
                    <div class="item-info">
                        <span class="item-icon">ğŸ’£</span>
                        <div class="item-details">
                            <h3 id="bomb-shop-title">æ¸…å±ç‚¸å¼¹</h3>
                            <p id="bomb-shop-desc">æ¸…é™¤å±å¹•ä¸Šæ‰€æœ‰è¡¨è¾¾å¼</p>
                        </div>
                    </div>
                    <div class="item-price">
                        <span class="price-amount">25</span>
                        <span class="coins-icon">ğŸª™</span>
                    </div>
                    <button id="buy-bomb-btn" class="buy-btn">è´­ä¹°</button>
                </div>
                <div class="shop-item">
                    <div class="item-info">
                        <span class="item-icon">ğŸ›¡ï¸</span>
                        <div class="item-details">
                            <h3 id="shield-shop-title">ç”Ÿå‘½æŠ¤ç›¾</h3>
                            <p id="shield-shop-desc">é˜²æ­¢ä¸€æ¬¡ç”Ÿå‘½æŸå¤±</p>
                        </div>
                    </div>
                    <div class="item-price">
                        <span class="price-amount">15</span>
                        <span class="coins-icon">ğŸª™</span>
                    </div>
                    <button id="buy-shield-btn" class="buy-btn">è´­ä¹°</button>
                </div>
            </div>
            <button id="shop-close-btn" class="menu-btn">å…³é—­å•†åº—</button>
        </div>
    </div>

    <!-- å¸®åŠ©ç•Œé¢ -->
    <div id="help-screen" class="screen hidden">
        <div class="screen-content">
            <h2 id="help-title">â“ æ¸¸æˆå¸®åŠ©</h2>
            <div class="help-section">
                <h3 id="help-objective-title">æ¸¸æˆç›®æ ‡</h3>
                <p id="help-objective-text">ç‚¹å‡»ç»“æœç­‰äºç›®æ ‡æ•°å­—çš„æ•°å­¦è¡¨è¾¾å¼æ¥å¾—åˆ†ï¼Œé¿å…é”™è¿‡æ­£ç¡®ç­”æ¡ˆï¼</p>
            </div>
            <div class="help-section">
                <h3 id="help-controls-title">æ§åˆ¶æ–¹æ³•</h3>
                <div class="controls-guide">
                    <div class="control-item">
                        <span class="control-key" id="help-click-key">ç‚¹å‡»/è§¦æ‘¸</span>
                        <div class="control-desc">
                            <strong id="help-click-title">é€‰æ‹©è¡¨è¾¾å¼</strong>
                            <p id="help-click-desc">ç‚¹å‡»ä½ è®¤ä¸ºæ­£ç¡®çš„æ•°å­¦è¡¨è¾¾å¼</p>
                        </div>
                    </div>
                    <div class="control-item">
                        <span class="control-key" id="help-space-key">ç©ºæ ¼é”®</span>
                        <div class="control-desc">
                            <strong id="help-space-title">æš‚åœ/ç»§ç»­</strong>
                            <p id="help-space-desc">æš‚åœæˆ–ç»§ç»­æ¸¸æˆ</p>
                        </div>
                    </div>
                    <div class="control-item">
                        <span class="control-key" id="help-f-key">Fé”®</span>
                        <div class="control-desc">
                            <strong id="help-f-title">ä½¿ç”¨å†»ç»“</strong>
                            <p id="help-f-desc">æš‚æ—¶å†»ç»“æ‰€æœ‰ä¸‹è½çš„è¡¨è¾¾å¼</p>
                        </div>
                    </div>
                    <div class="control-item">
                        <span class="control-key" id="help-b-key">Bé”®</span>
                        <div class="control-desc">
                            <strong id="help-b-title">ä½¿ç”¨ç‚¸å¼¹</strong>
                            <p id="help-b-desc">æ¸…é™¤å±å¹•ä¸Šæ‰€æœ‰è¡¨è¾¾å¼</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="help-buttons">
                <button id="help-close-btn" class="menu-btn">å…³é—­å¸®åŠ©</button>
                <button id="help-start-btn" class="menu-btn primary">å¼€å§‹æ¸¸æˆ</button>
            </div>
        </div>
    </div>

    <!-- Initialize Language and Shop Management -->
    <script>
        // Temporary compatibility functions until modules load
        window.selectLanguage = function(lang) {
            if (window.languageManager) {
                window.languageManager.selectLanguage(lang);
            }
        };
        
        // Update shop interface function for compatibility
        window.updateShopInterface = function() {
            if (window.shopManager) {
                window.shopManager.updateShopInterface();
            }
        };
        
        // Initialize on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, waiting for modules...');
        });
    </script>

    <!-- Load Language and Shop Managers -->
    <script type="module">
        (async () => {
            try {
                // Import language manager
                const { default: LanguageManager } = await import('./js/math-rain/i18n/language-manager.js');
                window.languageManager = new LanguageManager();
                window.languageManager.initialize();
                
                // Import shop manager  
                const { default: ShopManager } = await import('./js/math-rain/shop-manager.js');
                window.shopManager = new ShopManager();
                
                console.log('âœ… Language and Shop managers loaded');
            } catch (error) {
                console.error('âŒ Failed to load Language/Shop managers:', error);
            }
        })();
    </script>

    <!-- Load Core Dependencies -->
    <script type="module">
        // Import and expose to global scope
        import('./js/config-manager.js').then(module => {
            window.ConfigManager = module.default;
        });
        
        import('./js/performance-monitor.js').then(module => {
            window.PerformanceMonitor = module.default;
        });
        
        import('./js/math-rain/expression-generator.js').then(module => {
            window.ExpressionGenerator = module.default;
        });
        
        import('./js/math-rain/question-bank-manager.js').then(module => {
            window.QuestionBankManager = module.default;
        });
        
        import('./js/math-rain/difficulty-manager.js').then(module => {
            window.DifficultyManager = module.default;
        });
        
        import('./js/math-rain/sound-manager.js').then(module => {
            window.SoundManager = module.default;
        });
        
        import('./js/math-rain/animation-engine.js').then(module => {
            window.AnimationEngine = module.default;
        });
        
        import('./js/math-rain/particle-effects.js').then(module => {
            window.ParticleSystem = module.default;
        }).catch(error => {
            console.warn('ParticleSystem failed to load:', error);
        });
        
        // Load Mobile Adapter
        import('./js/math-rain/mobile-adapter.js').then(module => {
            window.MobileAdapter = module.default;
            console.log('âœ… Mobile Adapter loaded');
        }).catch(error => {
            console.warn('Mobile Adapter failed to load:', error);
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const currentUrl = window.location.href.split('#')[0];
            const canonical = document.getElementById('canonical-link');
            if (canonical) {
                canonical.setAttribute('href', currentUrl);
            }
            const baseUrl = new URL('.', currentUrl).href;
            const socialImage = new URL('assets/seo/og-math-rain.svg', baseUrl).href;

            const ogUrl = document.querySelector('meta[property="og:url"]');
            if (ogUrl) {
                ogUrl.setAttribute('content', currentUrl);
            }
            const ogImage = document.querySelector('meta[property="og:image"]');
            if (ogImage) {
                ogImage.setAttribute('content', socialImage);
            }
            const twitterImage = document.querySelector('meta[name="twitter:image"]');
            if (twitterImage) {
                twitterImage.setAttribute('content', socialImage);
            }

            const gameData = {
                "@context": "https://schema.org",
                "@type": "VideoGame",
                "name": "Math Rain",
                "url": currentUrl,
                "description": "Timed arithmetic practice game with falling equations.",
                "applicationCategory": "EducationalApplication",
                "operatingSystem": "Web",
                "genre": ["Educational", "Math", "Puzzle"],
                "playMode": "SinglePlayer",
                "image": socialImage,
                "inLanguage": document.documentElement.lang || "en",
                "publisher": {
                    "@type": "Organization",
                    "name": "Orangely"
                }
            };

            const breadcrumb = {
                "@context": "https://schema.org",
                "@type": "BreadcrumbList",
                "itemListElement": [
                    {
                        "@type": "ListItem",
                        "position": 1,
                        "name": "Mini Games Collection",
                        "item": baseUrl
                    },
                    {
                        "@type": "ListItem",
                        "position": 2,
                        "name": "Math Rain",
                        "item": currentUrl
                    }
                ]
            };

            [gameData, breadcrumb].forEach(data => {
                const script = document.createElement('script');
                script.type = 'application/ld+json';
                script.textContent = JSON.stringify(data);
                document.head.appendChild(script);
            });
        });
    </script>

    <!-- åŠ è½½é‡æ„åçš„æ ¸å¿ƒæ¸¸æˆé€»è¾‘ -->
    <script type="module">
        // ç­‰å¾…ä¾èµ–åŠ è½½å®Œæˆåå†åˆå§‹åŒ–
        setTimeout(async () => {
            try {
                // å¯¼å…¥æ¸¸æˆä¸»æ–‡ä»¶ (è‡ªåŠ¨åˆå§‹åŒ–)
                const { default: MathRainGame } = await import('./js/math-rain/main.js');
            } catch (error) {
                console.error('Failed to load Math Rain:', error);
            }
        }, 2000); // ç­‰å¾…2ç§’ç¡®ä¿æ‰€æœ‰ä¾èµ–åŠ è½½å®Œæˆ
    </script>
</body>

</html>
